## 由一道经典面试题引发的思考

```
 [] == ![]
 {} == !{}
```

## 一脸懵逼 为啥会这样呢

## javascript 的世界里没有啥好奇怪的 😊

## 我们先搞清 "==" 和 "===" 的区别 🤔️

### "==="叫做严格运算符

- 全等和不全等——仅比较而不转换 （===）

### "=="叫做相等运算符。

- 相等和不相等——先转换再比较 （==）

## 严格运算符

### 严格运算符的运算规则如下：

    1. 如果类型不同，就[不相等]
    2. 如果两个都是数值，并且是同一个值，那么[相等]；如果其中至少一个是 NaN，那么[不相等]。（判断一个值是否是 NaN，只能用 isNaN()来判断）
    3. 如果两个都是字符串，每个位置的字符都一样，那么[相等]；否则[不相等]。
    4. 如果两个值都是 true，或者都是 false，那么[相等]。
    5. 如果两个值都引用同一个对象或函数，那么[相等]；否则[不相等]。
    6. 如果两个值都是 null，或者都是 undefined，那么[相等]。

## 相等运算符

### 相等运算符的运算规则如下：

1. 如果两个值类型相同，进行 === 比较。
2. 如果两个值类型不同，他们可能相等。根据下面规则进行类型转换再比较：
   1. 如果一个是 null、一个是 undefined，那么[相等]。
   2. 如果任一值是字符串，另一个值是数值，在比较相等性之前先将字符串转换为数值；即是调用 Number()函数。
   3. 如果任一值时布尔值，则在比较相等性之前先将其转换为数值，即是调用 Number()函数。
   4. 如果一个是对象，另一个是数值或字符串，把对象转换成基础类型的值再比较。对象转换成基础类型，利用它的 toString 或者 valueOf 方法。 js 核心内置类，会尝试 valueOf 先于 toString；例外的是 Date，Date 利用的是 toString 转换。

## 回到题目 我们来探讨一下 [] == ! [] 的结果为什么会是 true 🤔

1. 根据运算符优先级, ! 的优先级是大于 == 的，所以先会执行 ![] 空数组转化为布尔类型 ==号 👉 就是 false;
2. == 👉 是 false 的话就符合 第三条规定 布尔类型比较之前 需要转化为数值 及 Number(false) 得到 0;
3. 此时已经变成了 [] == 0 进行比较 符合第四条规定 即 [ ].toString();结果为[].toString() = "";
4. 此时得到 "" == 0,发现符合第二条即 Number("");结果为 Number("") = 0;
5. 此时得到 0 == 0 两个同时为数值类型比较所以结果为 true;

## 练习

```
 +[] == +![]

 true == 'true'

 'foo' + + 'bar'
```

## 总结
